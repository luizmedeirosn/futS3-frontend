<div class="edit-parameter-form flex justify-content-center">
    <p-card
        *ngIf="parameters && ($viewTable | async)"
        header="Parameters"
        styleClass="shadow-none justify-content-center align-content-center align-content-center"
    >
        <p-table
            #parametersTable
            [value]="parameters"
            dataKey="id"
            [rows]="5"
            [rowHover]="true"
            [showCurrentPageReport]="true"
            [paginator]="true"
            [tableStyle]="{
                width: 'w-full',
            }"
        >
            <ng-template pTemplate="header" let-parameter>
                <tr>
                    <th id="" pSortableColumn="name">
                        <div
                            class="flex justify-content-between align-items-center"
                        >
                            <div
                                class="flex justify-content-between align-items-center text-lg mt-1"
                            >
                                Name
                            </div>
                            <div
                                class="flex justify-content-between align-items-center"
                            >
                                <p-sortIcon field="name"></p-sortIcon>
                                <p-columnFilter
                                    type="text"
                                    field="name"
                                    display="menu"
                                    matchMode="contains"
                                    [showMatchModes]="false"
                                    [showOperator]="false"
                                    [showAddButton]="false"
                                    style="height: 1.8rem"
                                ></p-columnFilter>
                            </div>
                        </div>
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-parameter>
                <tr style="cursor: pointer">
                    <td (click)="handleSelectParameter(parameter.id)">
                        {{ parameter.name }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>
</div>

<form
    *ngIf="selectedParameter && !($viewTable | async)"
    [formGroup]="editParameterForm"
    (ngSubmit)="handleSubmitEditParameterForm()"
    class="flex flex-column align-content-center m-3 gap-4"
>
    <div class="flex justify-content-start align-content-center">
        <p-button
            severity="primary"
            icon="pi pi-arrow-left"
            pTooltip="Return to the table"
            tooltipPosition="top"
            (click)="handleBackAction()"
        ></p-button>
    </div>

    <span class="p-float-label mt-3">
        <input pInputText formControlName="name" class="w-full" />
        <app-form-control-alert
            [form]="editParameterForm"
            [controlName]="'name'"
            [minNumberCharacters]="3"
            [maxNumberCharacters]="50"
        ></app-form-control-alert>
        <label for="name">Name</label>
    </span>

    <span class="p-float-label">
        <textarea
            rows="8"
            pInputTextarea
            formControlName="description"
            class="w-full"
        ></textarea>
        <app-form-control-alert
            [form]="editParameterForm"
            [controlName]="'description'"
            [minNumberCharacters]="0"
            [maxNumberCharacters]="2000"
        ></app-form-control-alert>
        <label for="description">Description</label>
    </span>

    <div
        class="flex flex justify-content-center align-content-center align-items-center mt-4"
    >
        <p-button
            [disabled]="!editParameterForm.valid"
            type="submit"
            label="Send"
            styleClass="p-button-success flex justify-content-center align-content-center gap-2"
        >
            <i class="pi pi-check" style="font-size: 1.2rem"></i>
        </p-button>
    </div>
</form>
